package convert

import (
	"testing"
)

type conversion struct {
	NMEA []byte
	Deg  float64
}

var (
	lats = []conversion{
		{[]byte("0240.690,N"), 2.858333333333},
		{[]byte("0742.362,N"), 7.800555555556},
		{[]byte("1112.864,S"), -11.4400000000},
		{[]byte("1825.847,N"), 18.65194444444},
		{[]byte("2002.959,N"), 20.29972222222},
		{[]byte("2833.745,S"), -28.7569444444},
		{[]byte("3937.741,N"), 39.82250000000},
		{[]byte("4018.964,S"), -40.5677777778},
		{[]byte("5159.072,S"), -52.0033333333},
		{[]byte("5722.266,N"), 57.44055555556},
		{[]byte("6448.776,N"), 65.01555555556},
		{[]byte("7427.886,S"), -74.6961111111},
		{[]byte("7624.259,N"), 76.47194444444},
		{[]byte("8323.821,S"), -83.6113888889},
		{[]byte("8803.738,S"), -88.2550000000},
	}
	lons = []conversion{
		{[]byte("00035.845,E"), 0.8180555555556},
		{[]byte("01355.385,W"), -14.02361111111},
		{[]byte("02208.646,E"), 22.312777777778},
		{[]byte("02946.454,W"), -29.89277777778},
		{[]byte("08709.319,W"), -87.23861111111},
		{[]byte("09801.421,E"), 98.133611111111},
		{[]byte("11544.558,E"), 115.88833333333},
		{[]byte("11650.226,W"), -116.8961111111},
		{[]byte("12900.432,W"), -129.1200000000},
		{[]byte("13751.479,E"), 137.98305555556},
		{[]byte("14817.441,E"), 148.40583333333},
		{[]byte("14937.538,W"), -149.7661111111},
		{[]byte("16150.273,W"), -161.9091666667},
		{[]byte("17046.720,W"), -170.9666666667},
		{[]byte("17256.818,E"), 173.16055555556},
	}
)

func TestNMEALat(t *testing.T) {
	for _, c := range lats {
		deg := NMEALat(c.NMEA)
		if deg+0.00001 < c.Deg || deg-0.00001 > c.Deg {
			t.Errorf("Conversion not within acceptable range. Expect %3.10f Got %3.10f", c.Deg, deg)
		}
	}
}

func TestNMEALon(t *testing.T) {
	for _, c := range lons {
		deg := NMEALon(c.NMEA)
		if deg+0.00001 < c.Deg || deg-0.00001 > c.Deg {
			t.Errorf("Conversion not within acceptable range. Expect %3.10f Got %3.10f", c.Deg, deg)
		}
	}
}
